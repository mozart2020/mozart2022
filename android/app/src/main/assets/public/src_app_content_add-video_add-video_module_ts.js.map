{"version":3,"file":"src_app_content_add-video_add-video_module_ts.js","mappings":"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","sources":["./src/app/content/add-video/add-video-routing.module.ts","./src/app/content/add-video/add-video.module.ts","./src/app/content/add-video/add-video.page.ts","./node_modules/capacitor-video-player/dist/esm/definitions.js","./node_modules/capacitor-video-player/dist/esm/index.js"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AddVideoPage } from './add-video.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AddVideoPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AddVideoPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AddVideoPageRoutingModule } from './add-video-routing.module';\r\nimport { AddVideoPage } from './add-video.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    AddVideoPageRoutingModule\r\n  ],\r\n  declarations: [AddVideoPage]\r\n})\r\nexport class AddVideoPageModule {}\r\n","import { Component, ElementRef, OnInit, ViewChild, ChangeDetectorRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, AlertController, ModalController, IonRouterOutlet, ToastController } from '@ionic/angular';\r\nimport { FormGroup, NgForm } from '@angular/forms';\r\nimport { CapacitorVideoPlayer, CapacitorVideoPlayerPlugin } from 'capacitor-video-player';\r\nimport { VideoService } from 'src/app/services/video.service';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { ChooseTeacherModalPage } from '../choose-teacher-modal/choose-teacher-modal.page';\r\n\r\n@Component({\r\n  selector: 'app-add-video',\r\n  templateUrl: './add-video.page.html',\r\n  styleUrls: ['./add-video.page.scss'],\r\n})\r\nexport class AddVideoPage implements OnInit {\r\n  @ViewChild('video') captureElement: ElementRef;\r\n  titleAndNotes: FormGroup;\r\n  mediaRecorder: MediaRecorder;\r\n  isRecording = false;\r\n  videoPlayer: CapacitorVideoPlayerPlugin;\r\n  playerIsInitialized = false;\r\n  takeVideoStatus = false;\r\n  \r\n  videoLocalUrl = '';\r\n  videoBlob: Blob;\r\n  length: number = 0;\r\n  videoId: string;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private loadingCtrl: LoadingController,\r\n    private alertCtrl: AlertController,\r\n    private modalCtrl: ModalController,\r\n    private routerOutlet: IonRouterOutlet,\r\n    private videoService: VideoService,\r\n    private authService: AuthService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private http: HttpClient,\r\n    private toastCtrl: ToastController\r\n    ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.videoPlayer = CapacitorVideoPlayer;\r\n  }\r\n   async presentToast(text) {\r\n    const toast = await this.toastCtrl.create({\r\n      message: text,\r\n      duration: 3000,\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async recordVideo() {\r\n    console.log('player is initialized: ', this.playerIsInitialized);\r\n    const stream = await navigator.mediaDevices.getUserMedia({\r\n      video: {\r\n        facingMode: 'user'\r\n      },\r\n      audio: true\r\n    });\r\n    this.captureElement.nativeElement.srcObject = stream;\r\n    this.captureElement.nativeElement.muted = true;\r\n    this.isRecording = true;\r\n    //Recorder:\r\n    const options = { mimeType: 'video/mp4' };\r\n    this.mediaRecorder = new MediaRecorder(stream, options);\r\n    let chunks = [];\r\n    this.mediaRecorder.ondataavailable = (event) => {\r\n      if (event.data && event.data.size > 0) {\r\n        chunks.push(event.data)\r\n      }\r\n    }\r\n    this.mediaRecorder.start();\r\n    this.mediaRecorder.onstop = async (event) => {\r\n      const videoBuffer = new Blob(chunks, { type: 'video/mp4' });\r\n      this.videoBlob = videoBuffer;\r\n      //Video: im internen Storage speichern:\r\n    \r\n      await this.videoService.storeVideo(videoBuffer);      \r\n      //get local videoUrl:\r\n      this.videoLocalUrl = this.videoService.localStorageVideoUrl;\r\n      this.changeDetector.detectChanges();\r\n      console.log('Nun sollte der Player geladen werden, wenn videoUrl vorhanden: ', this.videoLocalUrl);\r\n      ///init Video Player, Capacitor video pleyer requires base64:\r\n      const base64dataUrl = await this.videoService.getVideoBase64Url(this.videoLocalUrl);\r\n      console.log('video player: ', base64dataUrl);\r\n      // Show player embedded\r\n    await this.videoPlayer.initPlayer({\r\n        mode: 'embedded',\r\n        url: base64dataUrl,\r\n        playerId: 'player',\r\n        componentTag: 'app-add-video'\r\n       });\r\n    await this.videoPlayer.getDuration({ playerId: 'player' }).then(res => {\r\n      this.length = res.value;\r\n    });\r\n    console.log('is video length availabel? Not yet.', this.length);\r\n    }\r\n  }\r\n\r\n  stopRecord() {\r\n    console.log('player is initialized, start: ', this.playerIsInitialized);\r\n    this.mediaRecorder.stop();\r\n    this.mediaRecorder = null;\r\n    this.captureElement.nativeElement.srcObject = null;\r\n    this.isRecording = false;\r\n    this.playerIsInitialized = true;\r\n    this.changeDetector.detectChanges();\r\n    console.log('player is initialized, end: ', this.playerIsInitialized);\r\n  }\r\n\r\n\r\n  //will be called by clicking button \"I take this video\":\r\n  async openAlert(form: NgForm) {\r\n    this.takeVideoStatus = true;\r\n    const loading = await this.loadingCtrl.create({\r\n      message: 'Please wait...',\r\n    });\r\n    await loading.present();\r\n    //retrieve video length from capacitor player to use it for updating firestore DB:\r\n    await this.videoPlayer.getDuration({ playerId: 'player' }).then(res => {\r\n      this.length = res.value;\r\n      console.log('inside openAlert()', this.length);\r\n      loading.dismiss();\r\n    });\r\n    //let user decide wether to choose a teacher now or later\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Choose teachers',\r\n      //TO DO: change string (string interpolation) depending on if(friend, group or public teacher)\r\n      message: 'Would you like to ask a friend, a group or a public teacher for feedback?',\r\n      backdropDismiss: false,\r\n      buttons: [{ //if user decides to choose a teacher later, go to content page:\r\n        text: 'later',\r\n        role: 'Cancle',\r\n        cssClass: 'alert-class',\r\n        handler: (value: any) => {\r\n          console.log(form.value);\r\n          this.videoPlayer.stopAllPlayers();\r\n          this.chooseTeacherLater(form.value);\r\n        }\r\n      },\r\n    { //if user wants to choose a teacher: open choose-teacher-modal page:\r\n      text: 'yes',\r\n      role: 'Cancle',\r\n      cssClass: 'alert-class',\r\n      handler: (value: any) => {\r\n        this.videoPlayer.stopAllPlayers();\r\n        this.openChooseTeacher(form.value);\r\n      }\r\n    }]\r\n    });\r\n    await alert.present(); \r\n  }\r\n  \r\n  async chooseTeacherLater(formValue: any) { //formValue from openAlert()\r\n    console.log(formValue.title, formValue.notes, this.length, this.videoLocalUrl);\r\n    await this.videoService.addVideo(\r\n      formValue.title,      //title\r\n      formValue.notes,      //notes\r\n      this.length,          //length\r\n      this.videoLocalUrl,   //videoLocalUrl => local device storage\r\n      '');                  //videoUrl => backend storage (https), updated after video upload\r\n      this.uploadVideo();\r\n    this.router.navigateByUrl('home/content', {replaceUrl: true});\r\n  }\r\n  async openChooseTeacher(formValue: any) {\r\n    console.log('inside openChooseTeacher, current value length', this.length);\r\n    const modal = await this.modalCtrl.create ({\r\n      component: ChooseTeacherModalPage,\r\n      componentProps: {\r\n        title: formValue.title,\r\n        notes: formValue.notes,\r\n        length: this.length,\r\n        videoLocalUrl: this.videoLocalUrl\r\n      },\r\n      swipeToClose: true,\r\n      presentingElement: this.routerOutlet.nativeEl,\r\n      cssClass: 'transparent-modal' //ToDo: Check this class (global.scss)\r\n    });\r\n    modal.present();\r\n  }\r\n  \r\n  //Upload section:\r\n  async uploadVideo() {\r\n    const loading = await this.loadingCtrl.create({\r\n      message: 'Uploading video...',\r\n    });\r\n    await loading.present();\r\n    const userId = this.authService.getCurrentUserId();\r\n    const date = new Date().getTime();\r\n    const fileName = `${userId}_${date}.mp4`;\r\n    const formData = new FormData;\r\n    formData.append('file', this.videoBlob, fileName);\r\n    const url = 'https://backend.mozart.gives/upload.php';\r\n    this.http.post(url, formData)\r\n      .pipe(\r\n          finalize(() => {\r\n              loading.dismiss();\r\n              this.router.navigateByUrl('/home/content', { replaceUrl: true });\r\n          })\r\n      )\r\n      .subscribe(res => {\r\n          if (res['success']) {\r\n              this.presentToast('Video upload complete.');\r\n              this.videoService.updateVideoUrl(this.videoId, `https://backend.mozart.gives/uploads/${fileName}`);\r\n              console.log('video url created bei updateVideoUrl(): ', `https://backend.mozart.gives/uploads/${fileName}`, 'videoId: ', this.videoId);\r\n          } else {\r\n              this.presentToast('Video upload failed.');\r\n          }\r\n      });\r\n  }\r\n\r\n}\r\n","export {};\n","import { registerPlugin } from '@capacitor/core';\nconst CapacitorVideoPlayer = registerPlugin('CapacitorVideoPlayer', {\n    web: () => import('./web').then(m => new m.CapacitorVideoPlayerWeb()),\n});\nexport * from './definitions';\nexport { CapacitorVideoPlayer };\n"],"names":[],"sourceRoot":"webpack:///"}